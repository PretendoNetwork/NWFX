"use strict";window.onerror=function(e,t,n){return alert("Error occured on line "+n+": "+e),!1};var defaultTriggers={INPUT:"change",TEXTAREA:"change",SELECT:"change",FORM:"submit"},validSwapAreas=["innerHTML","outerHTML","afterbegin","beforebegin","beforeend","afterend","delete","none"],validEvents=["click","load"];function hydrateHTMLEvents(e){var t=[];e.querySelectorAll('[nwfx-boost="true"]:not([nwfx-hydrated])').forEach(function(e){e.querySelectorAll("a:not([nwfx-hydrated])").forEach(function(e){e.setAttribute("nwfx-get",e.href),e.setAttribute("nwfx-target","body")}),e.setAttribute("nwfx-hydrated","true")}),e.querySelectorAll("[nwfx-get]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)}),e.querySelectorAll("[nwfx-post]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)}),e.querySelectorAll("[nwfx-put]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)}),e.querySelectorAll("[nwfx-patch]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)}),e.querySelectorAll("[nwfx-delete]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)});for(var n=0,r=t;n<r.length;n++){var a=r[n],i="click";if(a.hasAttribute("nwfx-trigger")){var s=a.getAttribute("nwfx-trigger").split(" ");if(!validEvents.includes(s[0]))return;i=s[0]}else defaultTriggers[a.nodeName]&&(i=defaultTriggers[a.nodeName]);a.addEventListener(i,handleNWFXEvent),"load"===i&&a.dispatchEvent(new Event("load")),a.setAttribute("nwfx-hydrated","true")}}function handleNWFXEvent(e){var t,n,r=e.target,a=r,i="innerHTML",s=[],u="click",o="",d="",f="";if(r&&r instanceof HTMLElement&&!r.hasAttribute("nwfx-triggered")&&!r.classList.contains("nwfx-request")){if(r.hasAttribute("nwfx-get"))o="GET",d=r.getAttribute("nwfx-get");else if(r.hasAttribute("nwfx-post"))o="POST",d=r.getAttribute("nwfx-post");else if(r.hasAttribute("nwfx-put"))o="PUT",d=r.getAttribute("nwfx-put");else if(r.hasAttribute("nwfx-patch"))o="PATCH",d=r.getAttribute("nwfx-patch");else{if(!r.hasAttribute("nwfx-delete"))return;o="DELETE",d=r.getAttribute("nwfx-delete")}if(d){if(e.preventDefault(),r.hasAttribute("nwfx-target")&&(a=document.querySelector(r.getAttribute("nwfx-target"))),r.hasAttribute("nwfx-swap")&&(t=r.getAttribute("nwfx-swap"))&&t in validSwapAreas&&(i=t),r.hasAttribute("nwfx-trigger")){if(s=r.getAttribute("nwfx-trigger").split(" "),!validEvents.includes(s[0]))return;u=s[0]}else defaultTriggers[r.nodeName]&&(u=defaultTriggers[r.nodeName]);e.type!==u||(s.includes("once")&&r.setAttribute("nwfx-triggered","true"),r.hasAttribute("nwfx-prompt")&&null===(f=prompt(r.getAttribute("nwfx-prompt"))))||(r.classList.add("nwfx-request"),(n=new XMLHttpRequest).open(o,d,!0),n.onreadystatechange=function(){var e;n.readyState===XMLHttpRequest.DONE&&("delete"===i?r.remove():(200<=(e=n.status)&&e<400&&"none"!==i&&a&&a instanceof HTMLElement&&(e=(new DOMParser).parseFromString(n.responseText,"text/html"),"innerHTML"===i?(a.innerHTML=n.responseText,hydrateHTMLEvents(a)):"outerHTML"===i?(a.outerHTML=n.responseText,hydrateHTMLEvents(a.parentElement)):"afterbegin"===i?(a.insertAdjacentElement("afterbegin",e.documentElement),hydrateHTMLEvents(e)):"beforebegin"===i?(a.insertAdjacentElement("beforebegin",e.documentElement),hydrateHTMLEvents(e)):"beforeend"===i?(a.insertAdjacentElement("beforeend",e.documentElement),hydrateHTMLEvents(e)):"afterend"===i&&(a.insertAdjacentElement("afterend",e.documentElement),hydrateHTMLEvents(e))),r.classList.remove("nwfx-request")))},n.setRequestHeader("NWFX-Request","true"),n.setRequestHeader("NWFX-Current-URL",window.location.href),r.hasAttribute("id")&&n.setRequestHeader("NWFX-Trigger",r.id),r.hasAttribute("name")&&n.setRequestHeader("NWFX-Trigger-Name",r.getAttribute("name")),a&&a instanceof HTMLElement&&a.hasAttribute("id")&&n.setRequestHeader("NWFX-Target",a.id),r.hasAttribute("nwfx-prompt")&&n.setRequestHeader("NWFX-Prompt",f),n.send())}}}document.addEventListener("DOMContentLoaded",function(){document.head.insertAdjacentHTML("beforeend","<style>.nwfx-indicator{opacity:0;transition: opacity 200ms ease-in;}.nwfx-request .nwfx-indicator{opacity:1}.nwfx-request.indicator{opacity:1}</style>"),hydrateHTMLEvents(document)}),Array.prototype.includes=function(e){return!!~this.indexOf(e)},NodeList.prototype.forEach=function(e,t){[].forEach.call(this,e,t)};