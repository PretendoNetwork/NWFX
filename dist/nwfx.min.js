"use strict";window.onerror=function(t,e,n){return alert("Error occured on line "+n+": "+t),!1};var ClassList_1,XHRStates={DONE:4},defaultTriggers={INPUT:"change",TEXTAREA:"change",SELECT:"change",FORM:"submit"},validSwapAreas=["innerHTML","outerHTML","afterbegin","beforebegin","beforeend","afterend","delete","none"],validEvents=["click","change","submit","load"];function dispatchCustomEvent(t,e,n){var r=document.createEvent("Event");r.initEvent(e,null==n?void 0:n.bubbles,null==n?void 0:n.cancelable),null!=n&&n.detail&&(r.detail=n.detail),t.dispatchEvent(r)}function URLEncodeObject(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")}function hydrateHTMLEvents(t){var e=[];t.querySelectorAll('[nwfx-boost="true"]:not([nwfx-hydrated])').forEach(function(t){t.querySelectorAll("a:not([nwfx-hydrated])").forEach(function(t){t.setAttribute("nwfx-get",t.href),t.setAttribute("nwfx-target","body")}),t.querySelectorAll("form:not([nwfx-hydrated])").forEach(function(t){var e=t.method||"post",n=t.action||window.location.href;t.setAttribute("nwfx-".concat(e.toLocaleLowerCase()),n),t.setAttribute("nwfx-target","body")}),t.setAttribute("nwfx-hydrated","true")}),t.querySelectorAll("[nwfx-get]:not([nwfx-hydrated])").forEach(function(t){return e.push(t)}),t.querySelectorAll("[nwfx-post]:not([nwfx-hydrated])").forEach(function(t){return e.push(t)}),t.querySelectorAll("[nwfx-put]:not([nwfx-hydrated])").forEach(function(t){return e.push(t)}),t.querySelectorAll("[nwfx-patch]:not([nwfx-hydrated])").forEach(function(t){return e.push(t)}),t.querySelectorAll("[nwfx-delete]:not([nwfx-hydrated])").forEach(function(t){return e.push(t)});for(var n=0,r=e;n<r.length;n++){var a=r[n],s="click";if(a.hasAttribute("nwfx-trigger")){var i=a.getAttribute("nwfx-trigger").split(" ");if(!validEvents.includes(i[0]))return;s=i[0]}else defaultTriggers[a.nodeName]&&(s=defaultTriggers[a.nodeName]);a.addEventListener(s,handleNWFXEvent),"load"===s&&dispatchCustomEvent(a,"load"),a.setAttribute("nwfx-hydrated","true")}}function handleNWFXEvent(t){var n=t.target,r=n,a="innerHTML",e=[],s="click",i="",o="",u="";if(n&&n instanceof HTMLElement&&!n.hasAttribute("nwfx-triggered")&&!n.classList.contains("nwfx-request")){if(n.hasAttribute("nwfx-get"))i="GET",o=n.getAttribute("nwfx-get");else if(n.hasAttribute("nwfx-post"))i="POST",o=n.getAttribute("nwfx-post");else if(n.hasAttribute("nwfx-put"))i="PUT",o=n.getAttribute("nwfx-put");else if(n.hasAttribute("nwfx-patch"))i="PATCH",o=n.getAttribute("nwfx-patch");else{if(!n.hasAttribute("nwfx-delete"))return;i="DELETE",o=n.getAttribute("nwfx-delete")}if(o){if(t.preventDefault(),n.hasAttribute("nwfx-target")&&(r=document.querySelector(n.getAttribute("nwfx-target"))),n.hasAttribute("nwfx-swap")&&(f=n.getAttribute("nwfx-swap"))&&f in validSwapAreas&&(a=f),n.hasAttribute("nwfx-trigger")){if(e=n.getAttribute("nwfx-trigger").split(" "),!validEvents.includes(e[0]))return;s=e[0]}else defaultTriggers[n.nodeName]&&(s=defaultTriggers[n.nodeName]);if(t.type===s&&(!n.hasAttribute("nwfx-confirm")||confirm(n.getAttribute("nwfx-confirm")))&&(!n.hasAttribute("nwfx-prompt")||null!==(u=prompt(n.getAttribute("nwfx-prompt"))))){e.includes("once")&&n.setAttribute("nwfx-triggered","true"),n.classList.add("nwfx-request");var c={};if("FORM"!==n.nodeName&&n.hasAttribute("name")&&n.hasAttribute("value")&&(c[n.getAttribute("name")]=n.getAttribute("value")),"FORM"===n.nodeName&&n.querySelectorAll("[name]").forEach(function(t){t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?c[t.name]=t.value:t.hasAttribute("value")&&(c[t.getAttribute("name")]=t.getAttribute("value"))}),n.hasAttribute("nwfx-vals"))try{var d=JSON.parse(n.getAttribute("nwfx-vals"));Object.keys(d).forEach(function(t){c[t]=d[t]})}catch(t){}var f=URLEncodeObject(c),l=("GET"===i&&0<f.length&&(o="".concat(o,"?").concat(f)),dispatchCustomEvent(document,"nwfx:beforeRequest"),new XMLHttpRequest),h=(l.addEventListener("loadstart",function(){return dispatchCustomEvent(document,"nwfx:xhr:loadstart")}),l.addEventListener("loadend",function(){return dispatchCustomEvent(document,"nwfx:xhr:loadend")}),l.addEventListener("progress",function(){return dispatchCustomEvent(document,"nwfx:xhr:progress")}),l.addEventListener("load",function(){return dispatchCustomEvent(document,"nwfx:xhr:load")}),l.addEventListener("abort",function(){return dispatchCustomEvent(document,"nwfx:xhr:abort")}),l.open(i,o,!0),l.onreadystatechange=function(){var t,e;l.readyState===XHRStates.DONE&&("delete"===a?n.remove():(200<=(t=l.status)&&t<400?("none"!==a&&r&&r instanceof HTMLElement&&(e=(new DOMParser).parseFromString(l.responseText,"text/html"),"innerHTML"===a?(r.innerHTML=l.responseText,hydrateHTMLEvents(r)):"outerHTML"===a?(r.outerHTML=l.responseText,hydrateHTMLEvents(r.parentElement)):"afterbegin"===a?(r.insertAdjacentElement("afterbegin",e.documentElement),hydrateHTMLEvents(e)):"beforebegin"===a?(r.insertAdjacentElement("beforebegin",e.documentElement),hydrateHTMLEvents(e)):"beforeend"===a?(r.insertAdjacentElement("beforeend",e.documentElement),hydrateHTMLEvents(e)):"afterend"===a&&(r.insertAdjacentElement("afterend",e.documentElement),hydrateHTMLEvents(e))),dispatchCustomEvent(document,"nwfx:afterOnLoad")):dispatchCustomEvent(document,"nwfx:responseError",{detail:{status:t,responseText:l.responseText}}),n.classList.remove("nwfx-request")),dispatchCustomEvent(document,"nwfx:afterRequest"))},l.setRequestHeader("NWFX-Request","true"),l.setRequestHeader("NWFX-Current-URL",window.location.href),{});if(n.hasAttribute("nwfx-headers"))try{h=JSON.parse(n.getAttribute("nwfx-headers"))}catch(t){}n.hasAttribute("id")&&(h["NWFX-Trigger"]=n.id),n.hasAttribute("name")&&(h["NWFX-Trigger-Name"]=n.getAttribute("name")),r&&r instanceof HTMLElement&&r.hasAttribute("id")&&(h["NWFX-Target"]=r.id),n.hasAttribute("nwfx-prompt")&&(h["NWFX-Prompt"]=u),"GET"!==i&&(h["Content-Type"]="application/x-www-form-urlencoded"),Object.keys(h).forEach(function(t){l.setRequestHeader(t,h[t])}),dispatchCustomEvent(document,"nwfx:beforeSend"),l.send(f)}}}}document.addEventListener("DOMContentLoaded",function(){document.head.insertAdjacentHTML("beforeend","<style>.nwfx-indicator{opacity:0;transition: opacity 200ms ease-in;}.nwfx-request .nwfx-indicator{opacity:1}.nwfx-request.indicator{opacity:1}</style>"),hydrateHTMLEvents(document)}),Array.prototype.includes=function(t){return!!~this.indexOf(t)},NodeList.prototype.forEach=function(t,e){[].forEach.call(this,t,e)},void 0===Element.prototype.classList&&(ClassList_1=function(){function t(t){this.element=t,this.classList=this.element.className.split(" ")}return t.prototype.updateClassName=function(){this.element.className=this.classList.join(" ")},t.prototype.contains=function(t){return this.classList.includes(t)},t.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++)this.classList.push(r[n]);this.updateClassName()},t.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++)for(var a=r[n],s=0;s<this.classList.length;)this.classList[s]===a?this.classList.splice(s,1):++s;this.updateClassName()},t}(),Object.defineProperty(Element.prototype,"classList",{get:function(){return new ClassList_1(this)},enumerable:!0,configurable:!0})),window.CustomEvent;