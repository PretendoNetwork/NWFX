"use strict";window.onerror=function(e,t,n){return alert("Error occured on line "+n+": "+e),!1};var defaultTriggers={INPUT:"change",TEXTAREA:"change",SELECT:"change",FORM:"submit"},validSwapAreas=["innerHTML","outerHTML","afterbegin","beforebegin","beforeend","afterend","delete","none"],validEvents=["click","load"];function hydrateHTMLEvents(e){var t=[];e.querySelectorAll("[nwfx-get]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)}),e.querySelectorAll("[nwfx-post]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)}),e.querySelectorAll("[nwfx-put]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)}),e.querySelectorAll("[nwfx-patch]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)}),e.querySelectorAll("[nwfx-delete]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)});for(var n=0,r=t;n<r.length;n++){var a=r[n],i="click";if(a.hasAttribute("nwfx-trigger")){var s=a.getAttribute("nwfx-trigger").split(" ");if(!validEvents.includes(s[0]))return;i=s[0]}else defaultTriggers[a.nodeName]&&(i=defaultTriggers[a.nodeName]);a.addEventListener(i,handleNWFXEvent),"load"===i&&a.dispatchEvent(new Event("load")),a.setAttribute("nwfx-hydrated","true")}}function handleNWFXEvent(e){var t,n,r=e.target,a=r,i="innerHTML",s=[],o="click",f="",u="";if(r&&r instanceof HTMLElement&&!r.hasAttribute("nwfx-triggered")&&!r.classList.contains("nwfx-request")){if(r.hasAttribute("nwfx-get"))f="GET",u=r.getAttribute("nwfx-get");else if(r.hasAttribute("nwfx-post"))f="POST",u=r.getAttribute("nwfx-post");else if(r.hasAttribute("nwfx-put"))f="PUT",u=r.getAttribute("nwfx-put");else if(r.hasAttribute("nwfx-patch"))f="PATCH",u=r.getAttribute("nwfx-patch");else{if(!r.hasAttribute("nwfx-delete"))return;f="DELETE",u=r.getAttribute("nwfx-delete")}if(u){if(e.preventDefault(),r.hasAttribute("nwfx-target")&&(a=document.querySelector(r.getAttribute("nwfx-target"))),r.hasAttribute("nwfx-swap")&&(t=r.getAttribute("nwfx-swap"))&&t in validSwapAreas&&(i=t),r.hasAttribute("nwfx-trigger")){if(s=r.getAttribute("nwfx-trigger").split(" "),!validEvents.includes(s[0]))return;o=s[0]}else defaultTriggers[r.nodeName]&&(o=defaultTriggers[r.nodeName]);e.type===o&&(s.includes("once")&&r.setAttribute("nwfx-triggered","true"),r.classList.add("nwfx-request"),(n=new XMLHttpRequest).open(f,u,!0),n.onreadystatechange=function(){var e;n.readyState===XMLHttpRequest.DONE&&("delete"===i?r.remove():(200<=(e=n.status)&&e<400&&"none"!==i&&a&&a instanceof HTMLElement&&(e=(new DOMParser).parseFromString(n.responseText,"text/html"),"innerHTML"===i?(a.innerHTML=n.responseText,hydrateHTMLEvents(a)):"outerHTML"===i?(a.outerHTML=n.responseText,hydrateHTMLEvents(a.parentElement)):"afterbegin"===i?(a.insertAdjacentElement("afterbegin",e.documentElement),hydrateHTMLEvents(e)):"beforebegin"===i?(a.insertAdjacentElement("beforebegin",e.documentElement),hydrateHTMLEvents(e)):"beforeend"===i?(a.insertAdjacentElement("beforeend",e.documentElement),hydrateHTMLEvents(e)):"afterend"===i&&(a.insertAdjacentElement("afterend",e.documentElement),hydrateHTMLEvents(e))),r.classList.remove("nwfx-request")))},n.send())}}}document.addEventListener("DOMContentLoaded",function(){document.head.insertAdjacentHTML("beforeend","<style>.nwfx-indicator{opacity:0;transition: opacity 200ms ease-in;}.nwfx-request .nwfx-indicator{opacity:1}.nwfx-request.indicator{opacity:1}</style>"),hydrateHTMLEvents(document)}),Array.prototype.includes=function(e){return!!~this.indexOf(e)},NodeList.prototype.forEach=function(e,t){[].forEach.call(this,e,t)};