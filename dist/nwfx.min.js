"use strict";window.onerror=function(e,t,n){return alert("Error occured on line "+n+": "+e),!1};var defaultTriggers={INPUT:"change",TEXTAREA:"change",SELECT:"change",FORM:"submit"},validSwapAreas=["innerHTML","outerHTML","afterbegin","beforebegin","beforeend","afterend","delete","none"],validEvents=["click","load"];function hydrateHTMLEvents(e){var t=[];e.querySelectorAll('[nwfx-boost="true"]:not([nwfx-hydrated])').forEach(function(e){e.querySelectorAll("a:not([nwfx-hydrated])").forEach(function(e){e.setAttribute("nwfx-get",e.href),e.setAttribute("nwfx-target","body")}),e.setAttribute("nwfx-hydrated","true")}),e.querySelectorAll("[nwfx-get]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)}),e.querySelectorAll("[nwfx-post]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)}),e.querySelectorAll("[nwfx-put]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)}),e.querySelectorAll("[nwfx-patch]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)}),e.querySelectorAll("[nwfx-delete]:not([nwfx-hydrated])").forEach(function(e){return t.push(e)});for(var n=0,r=t;n<r.length;n++){var a=r[n],s="click";if(a.hasAttribute("nwfx-trigger")){var i=a.getAttribute("nwfx-trigger").split(" ");if(!validEvents.includes(i[0]))return;s=i[0]}else defaultTriggers[a.nodeName]&&(s=defaultTriggers[a.nodeName]);a.addEventListener(s,handleNWFXEvent),"load"===s&&a.dispatchEvent(new Event("load")),a.setAttribute("nwfx-hydrated","true")}}function handleNWFXEvent(e){var t,n,r=e.target,a=r,s="innerHTML",i=[],o="click",u="",d="",f="";if(r&&r instanceof HTMLElement&&!r.hasAttribute("nwfx-triggered")&&!r.classList.contains("nwfx-request")){if(r.hasAttribute("nwfx-get"))u="GET",d=r.getAttribute("nwfx-get");else if(r.hasAttribute("nwfx-post"))u="POST",d=r.getAttribute("nwfx-post");else if(r.hasAttribute("nwfx-put"))u="PUT",d=r.getAttribute("nwfx-put");else if(r.hasAttribute("nwfx-patch"))u="PATCH",d=r.getAttribute("nwfx-patch");else{if(!r.hasAttribute("nwfx-delete"))return;u="DELETE",d=r.getAttribute("nwfx-delete")}if(d){if(e.preventDefault(),r.hasAttribute("nwfx-target")&&(a=document.querySelector(r.getAttribute("nwfx-target"))),r.hasAttribute("nwfx-swap")&&(t=r.getAttribute("nwfx-swap"))&&t in validSwapAreas&&(s=t),r.hasAttribute("nwfx-trigger")){if(i=r.getAttribute("nwfx-trigger").split(" "),!validEvents.includes(i[0]))return;o=i[0]}else defaultTriggers[r.nodeName]&&(o=defaultTriggers[r.nodeName]);e.type!==o||r.hasAttribute("nwfx-confirm")&&!confirm(r.getAttribute("nwfx-confirm"))||r.hasAttribute("nwfx-prompt")&&null===(f=prompt(r.getAttribute("nwfx-prompt")))||(i.includes("once")&&r.setAttribute("nwfx-triggered","true"),r.classList.add("nwfx-request"),document.dispatchEvent(new CustomEvent("nwfx:beforeRequest")),(n=new XMLHttpRequest).addEventListener("loadstart",function(){return document.dispatchEvent(new CustomEvent("nwfx:xhr:loadstart"))}),n.addEventListener("loadend",function(){return document.dispatchEvent(new CustomEvent("nwfx:xhr:loadend"))}),n.addEventListener("progress",function(){return document.dispatchEvent(new CustomEvent("nwfx:xhr:progress"))}),n.addEventListener("load",function(){return document.dispatchEvent(new CustomEvent("nwfx:xhr:load"))}),n.addEventListener("abort",function(){return document.dispatchEvent(new CustomEvent("nwfx:xhr:abort"))}),n.open(u,d,!0),n.onreadystatechange=function(){var e,t;n.readyState===XMLHttpRequest.DONE&&("delete"===s?r.remove():(200<=(e=n.status)&&e<400?("none"!==s&&a&&a instanceof HTMLElement&&(t=(new DOMParser).parseFromString(n.responseText,"text/html"),"innerHTML"===s?(a.innerHTML=n.responseText,hydrateHTMLEvents(a)):"outerHTML"===s?(a.outerHTML=n.responseText,hydrateHTMLEvents(a.parentElement)):"afterbegin"===s?(a.insertAdjacentElement("afterbegin",t.documentElement),hydrateHTMLEvents(t)):"beforebegin"===s?(a.insertAdjacentElement("beforebegin",t.documentElement),hydrateHTMLEvents(t)):"beforeend"===s?(a.insertAdjacentElement("beforeend",t.documentElement),hydrateHTMLEvents(t)):"afterend"===s&&(a.insertAdjacentElement("afterend",t.documentElement),hydrateHTMLEvents(t))),document.dispatchEvent(new CustomEvent("nwfx:afterOnLoad"))):document.dispatchEvent(new CustomEvent("nwfx:responseError",{detail:{status:e,responseText:n.responseText}})),r.classList.remove("nwfx-request")),document.dispatchEvent(new CustomEvent("nwfx:afterRequest")))},n.setRequestHeader("NWFX-Request","true"),n.setRequestHeader("NWFX-Current-URL",window.location.href),r.hasAttribute("id")&&n.setRequestHeader("NWFX-Trigger",r.id),r.hasAttribute("name")&&n.setRequestHeader("NWFX-Trigger-Name",r.getAttribute("name")),a&&a instanceof HTMLElement&&a.hasAttribute("id")&&n.setRequestHeader("NWFX-Target",a.id),r.hasAttribute("nwfx-prompt")&&n.setRequestHeader("NWFX-Prompt",f),document.dispatchEvent(new CustomEvent("nwfx:beforeSend")),n.send())}}}document.addEventListener("DOMContentLoaded",function(){document.head.insertAdjacentHTML("beforeend","<style>.nwfx-indicator{opacity:0;transition: opacity 200ms ease-in;}.nwfx-request .nwfx-indicator{opacity:1}.nwfx-request.indicator{opacity:1}</style>"),hydrateHTMLEvents(document)}),Array.prototype.includes=function(e){return!!~this.indexOf(e)},NodeList.prototype.forEach=function(e,t){[].forEach.call(this,e,t)};